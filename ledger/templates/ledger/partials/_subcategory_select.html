<div class="row g-3">
  <p><!-- USING _subcategory_select.html --></p>

  <div class="col-12">
    <label class="form-label">Subcategory</label>
    <select name="{{ form.subcategory.name }}" id="id_subcategory" class="form-select">
      <option value="">— Select —</option>
      {% for sc in form.fields.subcategory.queryset %}
        <option value="{{ sc.pk }}"
                {% if form.subcategory.value|stringformat:"s" == sc.pk|stringformat:"s" %}selected{% endif %}
                data-requires-payee="{{ sc.requires_payee|yesno:'1,0' }}"
                data-payee-role="{{ sc.payee_role }}"
                data-requires-transport="{{ sc.requires_transport|yesno:'1,0' }}"
                data-requires-vehicle="{{ sc.requires_vehicle|yesno:'1,0' }}">
          {{ sc.name }}
        </option>
      {% endfor %}
    </select>

    {% if form.subcategory.errors %}
      <div class="invalid-feedback d-block">{{ form.subcategory.errors|striptags }}</div>
    {% endif %}

    <div class="form-text">This controls whether Payee/Transport is required.</div>
  </div>
</div>
